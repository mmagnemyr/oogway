<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css"> 
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.css">


        <title>
            Oogway Documentation - Index
        </title>
        <style>
            body {
              font-family: "Roboto", sans-serif;
              padding: 20px;
              font-size: 18px;
            }
            .important {
                font-weight: bold;
                font-style: italic; 
            }
            .highlight {
                font-weight: bold;
                font-style: italic;      
                background-color: yellow;
                    
                    
            }
            table {
                border-collapse: collapse;
                margin: 25px 0;
                font-size: 0.9em;
                font-family: sans-serif;
                min-width: 400px;
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            }

           th {
                background-color: #009879;
                color: #ffffff;
                text-align: left;
            }

            th,td {
                padding: 12px 15px;
            }

            tr {
                border-bottom: 1px solid #dddddd;
            }

            tr:nth-of-type(even) {
                background-color: #f3f3f3;
            }

            tr:last-of-type {
                border-bottom: 2px solid #009879;
            }

            .left {
                text-align:left;
            }
            .right {
                float:right;
            }

            .block1 {
                margin-left:20px;
            }

            .sql {
                margin-left: 20px;
                padding: 10px;
                background-color: whitesmoke;
                max-width:90%;
                font-size: 15px;
                word-wrap:break-word;
            }
            .divider {
                margin-top: 20px;
                width: 100%;
                border-top: 2px solid #bbb;
            }
        </style>
    </head>
    <body class="line-numbers">
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-sql.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/normalize-whitespace/prism-normalize-whitespace.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.js"></script>

        <h1>ODL Use Cases - Setup</h1>
        <div class="divider"/>
        <h2>What do you as a use case developer need to do?</h2>
        <div class="block1">
            <p>
                <h3>This guide requires that you have previously</h3>
                <ul>
                    <li>
                        Installed and configured WSL for Windows properly
                    </li>
                    <li>
                        Installed python in WSL
                    </li>
                    <li>
                        Installed python and pip for windows. You will need to use windows when building the output files.
                        <ul>
                            <li>How to setup a local development environment i Windows</li>
                            <ul>
                                <li><a href="https://vgcs-confluence.it.volvo.net/pages/viewpage.action?spaceKey=SOF&title=How+to+set+up+a+local+development+environment">https://vgcs-confluence.it.volvo.net/pages/viewpage.action?spaceKey=SOF&title=How+to+set+up+a+local+development+environment</a></li>
                            </ul>
                            <li>How to make pip work in windows 10</li>
                            <ul>
                                <li>go to your home folder in windows 10 i.e c:\users\a99999</li>

                                <li>create a folder named pip and cd into that folder</li>
                                <li>Now, create a file named pip.ini</li>
                                <li>Paste the following into the file
                                
                                    <div class="sql">
                                        <pre data-break-lines="100">
                                            <code class="language-SQL" data-prismjs-copy="Copy to clip board">
                                                [global]
trusted-host =  pypi.python.org
                pypi.org
                files.pythonhosted.org
proxy = http://cloudpxgot1.srv.volvo.com:8080
                                            </code>
                                        </pre>
                                    </div>    

                                </li>
                            </ul>
                        </ul>
                    </li>
                    <li>
                        Installed aws cli in WSL
                    </li>
                    <li>
                        Installed and configured AWS CDK in WSL 
                    </li>
                    <li>
                        Installed Office 365 Excel 
                    </li>
                    <li>
                        Configured git gerrit. You should be able to login. Make sure you belong to the correct SNOW groups. 
                        At least the group called "ODL". Otherwise you will not be able to do code reviews.
                    </li>
                    <li>
                        You also need to be able to connect to AWS using AWS Cli and SSO.
                    </li>
                    <li>
                        If not then you need to consult confluence and some help from your team mates.
                    </li>
                    <li>
                        if you want you can map your Ubuntu drive to a drive letter in windows
                        <ul>
                            <div class="sql">
                                <pre data-break-lines="100">
                                    <code class="language-SQL" data-prismjs-copy="Copy to clip board">
                                        net use j: \\wsl$\Ubuntu /persistent:yes
                                    </code>
                                </pre>
                            </div>
                            <li>Otherwise you refer to the drive simply by using <span class="highlight">wsl$</span></li>
                        </ul>
                    </li>
                </ul>

                <h3 id="setup_step1">Now, do this to setup your new project:</h3>

                <ul>
                    <li>Go to your home folder of WSL</li>
                    <li>Create the folder repos if you do not already have it.</li>
                    <li>Now swith to folder <span class="important">repos</span></li>
                    <li>git clone the odl repository.  
                        <div class="sql">
                            <pre data-break-lines="100">
                                <code class="language-SQL" data-prismjs-copy="Copy to clip board">
                                    git clone "ssh://git.vgt.volvo.com:29418/vgt/odl/odl
                                </code>
                            </pre>
                        </div>
                        <ul>
                           
                            <li>keep it updated with 
                                <div class="sql">
                                    <pre data-break-lines="100">
                                        <code class="language-SQL" data-prismjs-copy="Copy to clip board">
                                            git pull
                                        </code>
                                    </pre>
                                </div>
                            </li>
                        </ul>
                    <li>Please go the the folder <span class="highlight">\odl\code_generation_framework\type3_dwh_to_usecase\code_generator</span></li>
                    <ul>
                        <li>
                            This is the home for the oogway code generator. 
                        </li>
                        <li>
                            Oogway is written in Python so you will need to install some required pyton libraries before you can run it.
                        </li>
                        <ul>
                            <li>requirements.txt</li>
                        </ul>
                    </ul>
                    <li>Create a new CDK project in git.</li>
                    <ul>
                        <li>
                            <a href="https://pipelines.sharedservices.prod.euw1.vg-cs.net/projects">create new git project by following this link</a>

                        </li>
                        <li>give the project a proper name like the name of your use case i.e uc0039. Add -cdk as a suffix. I.e uc0039-cdk</li>
                        <li>The "Context" in the create project dialog should be set to odl</li>
                        <li>Select ODL for the "owning team.</li>
                        <li>Finally you select "Use Cases" from the list in "Component"</li>
                        <li>Make sure "Create gerrit repo" is checked.</li>
                        <li>Click button <b>Create</b></li>
                        <li>Hopefully this worked and you now have a new git repo for your use case</li>
                        <li>Now log in to gerrit  <span class="highlight"> <a href="https://git.vgt.volvo.com/admin/repos">https://git.vgt.volvo.com/admin/repos</a></span> and search for your new repo. </li>
                        <li>Click on the name when you find it and you will be linked to the git repo page</li>
                        <li>You will find two different Clone links. You must use "Clone with commit-msg hook. Copy this link and go to your ubuntu prompt."</li>
                        <li>Make sure your current folder is <span class="important">repos</span></li>
                        <li>Paste the copied link in the prompt i.e :</li>
                            <ul>
                                
                                    <div class="sql">
                                        <pre data-break-lines="100">
                                            <code class="language-SQL" data-prismjs-copy="Copy to clip board">
                                                git clone "https://a370481@git.vgt.volvo.com/a/vgt/odl/uc0099-cdk" && (cd "uc0099-cdk" && mkdir -p `git rev-parse --git-dir`/hooks/ && curl -Lo `git rev-parse --git-dir`/hooks/commit-msg https://git.vgt.volvo.com/tools/hooks/commit-msg && chmod +x `git rev-parse --git-dir`/hooks/commit-msg)
                                            </code>
                                        </pre>
                                    </div>
                                    
                                

                                <li>
                                    
                                        When you want to push code then 
                                    
                                </li>
                                <ul>
                                    
                                       
                                        <div class="sql">
                                            <pre data-break-lines="100">
                                                <code class="language-SQL" data-prismjs-copy="Copy to clip board">
                                                    git push origin HEAD:refs/for/main
                                                </code>
                                            </pre>
                                        </div>
                                    
                                    <li>
                                       then go to your dashboard in gerrit <span class="highlight"> <a href="https://git.vgt.volvo.com/dashboard/self">https://git.vgt.volvo.com/dashboard/self</a></span>
                                    </li>
                                    <li>
                                        find your commit in <b>Outgoing Reviews</b> 
                                     </li>
                                     <li>
                                        Add a reviewer by clicking then pen-icon to the right of the text "Reviwers"
                                     </li>
                                     <li>
                                        Add the email of the person you would like to review your commit.
                                     </li>
                                     <li>
                                        Click button <b>+2</b> to the right of the text Code-Review
                                     </li>
                                     <li>
                                        Click button <b>+1</b> to the right of the text Verified
                                     </li>
                                     <li>
                                        Click button <b>Send</b>
                                     </li>
                                </ul>
                            </ul>
                        
                        
                    </ul> 

                    <li>Your new repo should now be ready to use. However, when someone else is cloning your repo they need to use 
                        <div class="sql">
                            <pre data-break-lines="100">
                                <code class="language-SQL" data-prismjs-copy="Copy to clip board">
                                    ./oogway_refresh.ps1 
                                </code>
                            </pre>
                        </div>
                       
                        
                        first </li>
                    <li>Nice, now you have a new CDK git repo. Ready to be used! All you have to do now is to fill it with some wonderful code, deploy it and be happy!</li>
                </ul>

            </p>
        </div>
    </body>
    <div class="divider"/>
    <footer>
        <p class="left">
            <p>Thank you for using Oogway. We hope you soon will be part of the Oogway developer team! Happy coding!</p>  
            <p>Please keep this documentation updated.</p>
        </p>
        
        
       
    </footer>